<html>
  <head>
    <title>ğŸ” Headless ğŸ”</title>
    <style>
      input:invalid {
        border: red solid 3px;
      }
    </style>
  </head>
  <body>
    <h1>Yo!</h1>
    <h2>Give me an address to parse from /proc/net/tcp</h2>
    <input placeholder="03001CAC:CD96" name="name" pattern="[0-9ABCDEF]{8}:[0-9ABCDEF]{4}"/>
    <p id="log"></p>
    <script>
      const input = document.querySelector('input');
      const log = document.getElementById('log');

      input.addEventListener('change', updateValue);

      function updateValue(e) {
        if (!e.target.validity.valid) {
          log.textContent = "Invalid address. Something like 03001CAC:CD96 por favor";
          return;
        }

        const address = e.target.value.split(":");
        log.textContent = address[0].match(/.{1,2}/g).map(x=>parseInt(x,16)).reverse().join(".");
        log.textContent += ":" + address[1].match(/.{1,2}/g).map(x=>parseInt(x,16)).reduce((a, b) => a + b, 0);
      }

      fetch("https://api.github.com/repos/asasvari/lazy/contents/web_hack/proctcp.html")
          .then(response => response.json())
          .then(r => {
            history.pushState({}, null, "ğŸ”" + ["sha"].substring(0,8));
      })
    </script>
  </body>
</html>
